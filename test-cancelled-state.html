<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Estado P√≥liza Cancelada</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="form-container" style="display: block;">
            <div class="header">
                <h2>Test - Estados de Respuesta</h2>
                <button onclick="testStates()" class="logout-btn">Probar Estados</button>
            </div>
            
            <div class="embedded-form">
                <div class="cedula-form">
                    <h3>Prueba de Estados de P√≥liza</h3>
                    <p style="color: #666; margin-bottom: 20px;">
                        Haz clic en "Probar Estados" para ver los diferentes tipos de mensajes.
                    </p>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                        <button onclick="testSuccessMessage()" 
                                style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
                            √âxito Real
                        </button>
                        <button onclick="showCancelledMessage('‚ö†Ô∏è La p√≥liza ya est√° cancelada anteriormente')" 
                                style="background: #ffc107; color: #212529; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
                            Cancelada
                        </button>
                        <button onclick="showErrorMessage('‚ùå Error: C√©dula no encontrada')" 
                                style="background: #dc3545; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer;">
                            Error
                        </button>
                    </div>
                    
                    <div id="formMessage" class="form-message" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Incluir las funciones del script principal
        function showSuccessMessage(htmlMessage) {
            console.log('‚úÖ Mostrando mensaje de √©xito:', htmlMessage);
            const messageDiv = document.getElementById('formMessage');
            messageDiv.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; color: #28a745; margin-bottom: 15px;">‚úÖ</div>
                    <div style="color: #155724; line-height: 1.6;">
                        ${htmlMessage}
                    </div>
                    <div style="margin-top: 20px;">
                        <button onclick="resetForm()" 
                                style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: 600;">
                            Nueva Consulta
                        </button>
                    </div>
                </div>
            `;
            messageDiv.className = 'form-message success';
            messageDiv.style.display = 'block';
        }

        function showCancelledMessage(htmlMessage) {
            console.log('üü° Mostrando mensaje de p√≥liza cancelada:', htmlMessage);
            const messageDiv = document.getElementById('formMessage');
            messageDiv.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; color: #ffc107; margin-bottom: 15px;">‚ö†Ô∏è</div>
                    <div style="color: #856404; line-height: 1.6; font-weight: 500;">
                        ${htmlMessage}
                    </div>
                    <div style="margin-top: 20px;">
                        <button onclick="resetForm()" 
                                style="background: #ffc107; color: #212529; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: 600;">
                            Nueva Consulta
                        </button>
                    </div>
                </div>
            `;
            messageDiv.className = 'form-message cancelled';
            messageDiv.style.display = 'block';
        }

        function showErrorMessage(htmlMessage) {
            console.log('üî¥ Mostrando mensaje de error:', htmlMessage);
            const messageDiv = document.getElementById('formMessage');
            messageDiv.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3rem; color: #dc3545; margin-bottom: 15px;">‚ùå</div>
                    <div style="color: #721c24; line-height: 1.6;">
                        ${htmlMessage}
                    </div>
                    <div style="margin-top: 20px;">
                        <button onclick="resetForm()" 
                                style="background: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: 600;">
                            Intentar Nuevamente
                        </button>
                    </div>
                </div>
            `;
            messageDiv.className = 'form-message error';
            messageDiv.style.display = 'block';
        }

        function resetForm() {
            const messageDiv = document.getElementById('formMessage');
            messageDiv.style.display = 'none';
        }

        function testSuccessMessage() {
            const realSuccessMessage = `P√≥liza Cancelada con √âxito<br><br>Se actualiz√≥ la p√≥liza asociada al documento<br><b>{{ $('Webhook').item.json.body.cedula }}</b><br>con el estado <b>"Cancelado por Staffing"</b>.<br><br><b>Fecha de actualizaci√≥n:</b> {{ new Date().toISOString().replace('T',' ').slice(0,19) }} UTC<br><br><br><small>La Aseguradora ¬∑ InsuraTech</small>`;
            showSuccessMessage(realSuccessMessage);
        }

        function testStates() {
            alert('Haz clic en los botones de arriba para probar cada estado de respuesta');
        }
    </script>
</body>
</html>
